import{r as t,u as z,a as N,j as e,S as x,L as y}from"./index-u5a8Z9c2.js";import{C as v,a as k}from"./circle-check-Ctm6ejyF.js";function C(){const[r,u]=t.useState(""),[o,h]=t.useState(""),[i,a]=t.useState(""),[n,d]=t.useState(!1),[l,c]=t.useState(""),{updatePassword:p,signOut:w,user:f,loading:b}=z(),g=N(),j=async s=>{if(s.preventDefault(),a(""),c(""),r!==o){a("Hasła nie są identyczne");return}if(r.length<6){a("Hasło musi mieć co najmniej 6 znaków");return}d(!0);const{error:m}=await p(r);d(!1),m?a(m.message):(c("Hasło zostało zmienione. Za chwilę przeniesiemy Cię na stronę logowania."),await w(),setTimeout(()=>{g({to:"/login"})},5e3))};return b?e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(x,{size:"lg"})}):f?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-zinc-200 p-8 w-xl max-w-md",children:[e.jsxs("div",{className:"p-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-700 text-center mb-2",children:"Ustaw nowe hasło"}),e.jsx("p",{className:"text-zinc-600 text-center mb-4",children:"Wprowadź swoje nowe hasło."})]}),l?e.jsxs("div",{className:"bg-green-50 text-green-600 px-4 py-5 rounded-md text-sm text-center flex flex-col items-center",children:[e.jsx(v,{className:"size-8 mb-3"}),e.jsx("span",{className:"max-w-xs",children:l})]}):e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nowe hasło"}),e.jsx("input",{type:"password",id:"password",required:!0,value:r,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Minimum 6 znaków"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-zinc-700 mb-1",children:"Potwierdź nowe hasło"}),e.jsx("input",{type:"password",id:"confirmPassword",required:!0,value:o,onChange:s=>h(s.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Powtórz nowe hasło"})]}),i&&e.jsxs("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-md text-sm flex items-center gap-2",children:[e.jsx(k,{className:"size-5 shrink-0"}),e.jsx("span",{children:i})]}),e.jsxs("button",{type:"submit",disabled:n,className:"w-full bg-red-600 text-white font-semibold py-3 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[n&&e.jsx(x,{size:"sm"}),n?"Zapisywanie hasła...":"Zapisz nowe hasło"]})]})]}):e.jsxs("div",{className:"w-xl max-w-md bg-white rounded-lg shadow-sm border border-zinc-200 p-8 flex flex-col items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-zinc-700 text-center mb-2",children:"Link wygasł"}),e.jsx("p",{className:"text-zinc-600 text-center max-w-3xs",children:"Aby uzyskać nowy link, przejdź do strony resetowania hasła."}),e.jsx(y,{to:"/forgot-password",className:"font-semibold text-sm mt-6 text-red-600 hover:text-red-700",children:"Zresetuj swoje hasło"})]})}export{C as component};
